# Linux todo:

# Install ruby-dev packages
sudo apt-get install ruby1.8-dev -y

# Install MongoDb
# http://www.mongodb.org/display/DOCS/Ubuntu+and+Debian+packages
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10

sudo echo "deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen" >> /etc/apt/sources.list
sudo apt-get install mongodb-10gen -y

# Install and setup passenger
sudo echo "deb http://apt.brightbox.net hardy main" >> /etc/apt/sources.list
sudo apt-get install libapache2-mod-passenger -y

# Install the necessary gems:
sudo gem install dm-core -v 1.1.0 --no-ri --no-rdoc
sudo gem install dm-validations --no-ri --no-rdoc
sudo gem install dm-aggregates -v 1.1.0 --no-ri --no-rdoc
sudo gem install mongo -v 1.2.4   --no-ri --no-rdoc
sudo gem install dm-mongo-adapter --no-ri --no-rdoc

sudo gem install sinatra   --no-ri --no-rdoc
sudo gem install httpclient --no-ri --no-rdoc
sudo gem install aws-s3 --no-ri --no-rdoc
sudo gem install json --no-ri --no-rdoc

sudo gem install passenger --no-ri --no-rdoc
sudo /var/lib/gems/1.8/gems/passenger-3.0.7/bin/passenger-install-apache2-module

# Capistrano for deployment - needs to be installed only at the dev machine
# from which to deploy. Not needed in production
# sudo gem install capistrano --no-ri --no-rdoc
  
# TODO: Figure out how to use bundler to bundle these things up

# Linux to watch out
#   Web server deployment
#   Monitoring
#   Logging
#   

# Add this if passenger won't start
# sudo gem install bundler --prerelease

# Setup cron job log. Cron job is setup as part of cold deploy
touch "/var/logs/backup.log"
chmod 0777 /var/logs/backup.log